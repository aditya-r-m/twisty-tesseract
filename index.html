<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>hello-wasm example</title>
  </head>
  <body style="max-width: max-content; margin: auto">
    <script type="module">
      import init, { Tesseract } from "./pkg/twisty_tesseract.js";
      init().then(() => {
        const canvas = document.createElement("canvas");
        canvas.setAttribute("width", "800px");
        canvas.setAttribute("height", "800px");
        document.body.appendChild(canvas);
        window.tesseract = Tesseract.new();
        const renderLoop = () => {
          const context = canvas.getContext('2d');
          const centerX = canvas.width / 2;
          const centerY = canvas.height / 2;
          const radius = 4;
          console.log(window.tesseract.project());
          for (let point of window.tesseract.project().split("|")) {
            let [x, y, c] = point.split(",");
            x = parseInt(x);
            y = parseInt(y);
            context.beginPath();
            context.arc(centerX + x, centerY + y, radius, 0, 2 * Math.PI, false);
            context.fillStyle = c;
            context.fill();
            context.lineWidth = 1;
            context.strokeStyle = 'black';
            context.stroke();
          }
          //requestAnimationFrame(renderLoop);
        };
        renderLoop();
      });
    </script>
  </body>
</html>

